# 11. 원시 값과 객체의 비교

- 원시 값

  - 변경 불가능한 값
  - 메모리에 실제 값 저장.
  - 할당: 값 복사

- 객체
  - 변경 가능한 값
  - 메모리에 참조 값 저장.
  - 할당: 참조 복사(참조에 의한 전달)

## 11.1 원시 값

### 11.1.1 변경 불가능한 값

- 원시 값은 변경 불가능한 값. 즉, **읽기 전용 값**
- 상수와 유사하지만, 상수는 **재할당이 금지된 변수**를 말함.

- 원시 값의 할당: 값 복사
  - 원시 값은 변경 불가능한 값이므로 변수에 새로운 값을 재할당하면 새로운 값을 메모리에 생성하고 메모리 공간의 주소를 바꾼다.

### 11.1.2 문자열과 불변성

- ECMAScript 사양에서 문자열 타입(2바이트)과 숫자 타입(8바이트)임.
- 문자열은 **0개 이상의 16비트 유니코드 문자(UTF-16)로 이루어진 집합**.
- 문자열은 **유사 배열 객체**이면서 **이터러블**이므로 배열과 유사하게 인덱스로 문자에 접근 가능.

> #### 이터러블
>
> 이터러블은 **반복 가능한 객체**를 말함.

```js
const str = "hello";
console.log(str[0]); // h

// 원시 값인 문자열이 객체처럼 동작한다.
console.log(str.length); // 5
```

- 문자열은 변경 불가능한 값이므로 문자열의 요소를 변경하려 해도 무시됨.

```js
const str = "hello";
str[0] = "S"; // 무시
console.log(str); // hello
```

### 11.1.3 값에 의한 전달

- 원시 값은 **값에 의한 전달** 방식으로 동작.
- 값이 복사되어 전달된다.
  - 다른 메모리 공간에 저장된 별개의 값.
- _변수와 같은 식별자는 값이 아니라 메모리 주소를 기억하고 있다._

## 11.2 객체

### 자바스크립트 객체의 관리 방식

- 프로퍼티 키를 인덱스로 사용하는 해시 테이블이라 생각할 수 있다.
- 높은 성능을 위해 일반적인 해시 테이블보다 나은 방법으로 객체를 구현한다.
- V8 엔진에서 **히든 클래스** 방식을 사용해 프로퍼티에 접근한다.

### 11.2.1 변경 가능한 값

- 객체(참조) 타입의 값은 객체는 변경 가능한 값
- 객체는 복사되면 메모리 비용이 많이들기 때문에 메모리를 효율적으로 사용하기 위해, **참조에 의한 전달** 방식을 사용한다.
- 여러 개의 식별자가 하나의 객체를 공유할 수 있다.

### 얕은 복사와 깊은 복사

- 얕은 복사: 객체를 복사할 때, **참조 값을 복사**하는 것.
- 깊은 복사: 객체를 복사할 때, **객체 내부의 프로퍼티도 복사**하는 것.

### 11.2.2 참조에 의한 전달

- **값에 의한 전달**과 **참조에 의한 전달**은 식별자가 기억하는 메모리 공간에 저장되어 있는 값을 복사해서 전달한다는 면에서 동일하다.
- 따라서, 자바스크립트에는 "참조에 의한 전달"은 존재하지 않고 "값에 의한 전달"만이 존재한다고 말할 수 있다.
- 이런 이유로 "공유에 의한 전달"이라는 표현을 쓴다.
